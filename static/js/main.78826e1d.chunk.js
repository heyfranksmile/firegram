(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[0],{10:function(e,t,a){"use strict";a.r(t),a.d(t,"appStorage",(function(){return r})),a.d(t,"appFirestore",(function(){return c})),a.d(t,"timestamp",(function(){return l}));var n=a(9);a(22),a(23);n.a.initializeApp({apiKey:"AIzaSyAmUrBk9HNFFqbrQX_W8lalZiIu2YX9MBs",authDomain:"firegram-be72d.firebaseapp.com",projectId:"firegram-be72d",storageBucket:"firegram-be72d.appspot.com",messagingSenderId:"315682376024",appId:"1:315682376024:web:ea5997ac572d4dc046fd2d"});var r=n.a.storage(),c=n.a.firestore(),l=n.a.firestore.FieldValue.serverTimestamp},21:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(15),l=a.n(c),i=(a(21),a(5)),o=a(12),s=a(10),u=function(e){var t=Object(n.useState)([]),a=Object(i.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){return s.appFirestore.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(o.a)(Object(o.a)({},e.data()),{},{id:e.id}))})),c(t)}))}),[e]),{docs:r}},m=a(8),d=function(e){var t=e.setSelectedImage,a=u("images").docs;return r.a.createElement("div",{className:"img-grid"},a&&a.map((function(e){var a=e.id,n=e.url;return r.a.createElement(m.a.div,{layout:!0,whileHover:{opacity:1},className:"img-wrap",key:a,onClick:function(){return t(n)}},r.a.createElement(m.a.img,{src:n,alt:"uploaded pic",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}}))})))},p=function(e){var t=e.setSelectedImage,a=e.selectedImage,c=Object(n.useRef)(null);return r.a.createElement(m.a.div,{className:"backdrop",onClick:function(e){return e.target!==c.current&&t(null)},initial:{opacity:0},animate:{opacity:1}},r.a.createElement(m.a.img,{ref:c,src:a,alt:"selected img",initial:{y:"-100vh"},animate:{y:0}}))},f=function(){return r.a.createElement("div",{className:"title"},r.a.createElement("h1",null,"FireGram"),r.a.createElement("h2",null,"Your Pictures"),r.a.createElement("p",null,"All in One Place."))},g=a(11),E=a.n(g),v=a(16),b=a(1),j=b.useState,h=b.useEffect,y=a(10),O=y.appStorage,S=y.timestamp,I=y.appFirestore,w=function(e){console.log("useStorage called");var t=j(0),a=Object(i.a)(t,2),n=a[0],r=a[1],c=j(null),l=Object(i.a)(c,2),o=l[0],s=l[1],u=j(null),m=Object(i.a)(u,2),d=m[0],p=m[1];return h((function(){console.log("CH useEffect called");var t=O.ref(e.name),a=I.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred,a=e.totalBytes;r(t/a*100),console.log("progress state changed")}),(function(e){s(e)}),Object(v.a)(E.a.mark((function e(){var n,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("upload complete + url state to change"),e.next=3,t.getDownloadURL();case 3:n=e.sent,r=S(),a.add({url:n,createdAt:r}),p(n);case 7:case"end":return e.stop()}}),e)}))))}),[e]),console.log("stuff returned"),{progress:n,error:o,url:d}},k=function(e){var t=e.file,a=e.setFile,c=w(t),l=c.progress,i=c.url;return console.log(l,i),Object(n.useEffect)((function(){console.log("<ProgressBar /> useEffect called"),i&&a(null)}),[i]),r.a.createElement(m.a.div,{className:"progress-bar",initial:{width:0},animate:{width:"".concat(l,"%")}})},F=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),s=o[0],u=o[1],m=["image/png","image/jpeg"];return r.a.createElement("form",null,r.a.createElement("label",null,r.a.createElement("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&m.includes(t.type)?(c(t),u("")):(c(null),u("Please choose an image file (.png or .jpeg)"))}}),r.a.createElement("span",null,"+")),r.a.createElement("div",{className:"output"},s&&r.a.createElement("div",{className:"error"},s),a&&r.a.createElement("div",null,a.name),a&&r.a.createElement(k,{file:a,setFile:c})))};var N=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(f,null),r.a.createElement(F,null),r.a.createElement(d,{setSelectedImage:c}),a&&r.a.createElement(p,{selectedImage:a,setSelectedImage:c}))};l.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.78826e1d.chunk.js.map